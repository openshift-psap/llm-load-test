[tox]
envlist = linters, py39
skipsdist = true

# How do you install pywin32 from a binary file in tox on Windows?
# https://stackoverflow.com/questions/26639947/how-do-you-install-pywin32-from-a-binary
[testenv]
allowlist_externals=*
deps =
       -r{toxinidir}/test-requirements.txt
commands =
    {envpython} --version

[testenv:venv]
basepython = python3
commands =
    {posargs}

#
# Begin linters
#
[testenv:format]
envdir = {toxworkdir}/linters
deps = {[testenv:linters]deps}
commands =
    bash -c 'python -m ruff format .'

[testenv:lint]
envdir = {toxworkdir}/linters
deps = {[testenv:linters]deps}
commands =
    bash -c 'python -m ruff check . --fix'

[testenv:linters]
deps =
    -r{toxinidir}/test-requirements.txt
commands =
    {[testenv:format]commands}
    {[testenv:lint]commands}
    # TODO: Also enable pylint in a follow-up PR
    # {[testenv:pylint]commands}
#
# End linters
#
